!function(){function e(e){if(!e)return!1;const t=String(e).trim().match(/^([^@]+)@([^@]+)$/);return!!t&&!!/^[A-Z0-9!#$%&'*+/=?^_`{|}~.-]+$/i.test(t[1])&&!!/^[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t[2])}function t(t){const o=Array.from(t.querySelectorAll('[data-form-input="1"][name]')).filter((e=>!e.disabled));if(!o.length)return!1;const r=o.some((e=>!0===e.required)),n=e=>!r||!0===e.required,s=new Map;for(const e of o)if(("checkbox"===e.type||"radio"===e.type)&&n(e)){const t=s.get(e.name)||{required:!1,anyChecked:!1,hasInputs:!1};t.required=!0,t.anyChecked=t.anyChecked||e.checked,t.hasInputs=!0,s.set(e.name,t)}for(const t of o){var a;if(!n(t))continue;if("checkbox"===t.type||"radio"===t.type)continue;const o=t.tagName.toLowerCase();if("email"===t.type||"1"===t.getAttribute("data-validate-email")){var c;const o=(null!==(c=t.value)&&void 0!==c?c:"").toString().trim();if(""===o||!e(o))return!1}else{var i;if("file"!==t.type){if("select"!==o){if(""===(null!==(a=t.value)&&void 0!==a?a:"").toString().trim())return!1}else if(""===(null!==(i=t.value)&&void 0!==i?i:"").trim())return!1}else if(!(t.files&&t.files.length>0))return!1}}for(const[,e]of s)if(e.required&&e.hasInputs&&!e.anyChecked)return!1;const d=t.querySelector('.cc-input[type="checkbox"][required]');return!(d&&!d.checked)}function o(e,o){const r=t(o);e.classList.toggle("active",r),e.disabled=!r}function r(e=document){e.querySelectorAll('[data-form-submit="1"]').forEach((e=>{if(e.__fcBound)return;e.__fcBound=!0;const r=e.getAttribute("data-scope-class")||".form-scope",n=e.getAttribute("data-action")||"/",s=(e.getAttribute("data-method")||"POST").toUpperCase(),a=e.getAttribute("data-success-message")||"OK",c=e.getAttribute("data-error-message")||"Error",i=document.querySelector(r);i?function(e,t){if(!t||e.__fcValBound)return;e.__fcValBound=!0;const r=()=>o(e,t);r(),t.addEventListener("input",r),t.addEventListener("change",r)}(e,i):(console.warn("[form-components] scope element not found:",r),e.disabled=!0),e.addEventListener("click",(i=>{i.preventDefault();const d=document.querySelector(r);return d?t(d)?void async function({action:e,method:t,scopeEl:r,button:n,successMessage:s,errorMessage:a}){const c=n.textContent;n.disabled=!0,n.classList.add("is-loading");try{const a=function(e){const t=e.querySelectorAll('[data-form-input="1"][name]'),o=new FormData;return t.forEach((e=>{var t;e.disabled||("checkbox"===e.type||"radio"===e.type?e.checked&&o.append(e.name,e.value||"on"):o.append(e.name,null!==(t=e.value)&&void 0!==t?t:""))})),o}(r),i={method:t||"POST"};if("GET"===(t||"POST").toUpperCase()){const t=new URLSearchParams;for(const[e,o]of a.entries())t.append(e,o);const o=e.includes("?")?`${e}&${t}`:`${e}?${t}`;if(!(await fetch(o,{method:"GET",credentials:"same-origin"})).ok)throw new Error("Network error")}else if(i.body=a,i.credentials="same-origin",!(await fetch(e,i)).ok)throw new Error("Network error");n.classList.remove("is-loading"),n.classList.add("is-success"),s&&alert(s),n.textContent=c,r.querySelectorAll('[data-form-input="1"][name]').forEach((e=>{"checkbox"===e.type||"radio"===e.type?e.checked=!1:(e.type,e.value="")})),o(n,r)}catch(e){n.classList.remove("is-loading"),n.classList.add("is-error"),a&&alert(a),console.error("[form-components] submit failed:",e),n.textContent=c}finally{setTimeout((()=>{n.classList.remove("is-success","is-error"),o(n,r)}),1200)}}({action:n,method:s,scopeEl:d,button:e,successMessage:a,errorMessage:c}):(alert("Перевірте правильність заповнення полів."),void o(e,d)):(console.warn("[form-components] scope element not found:",r),void alert("Не знайдено контейнер форми: "+r))}))}))}document.addEventListener("DOMContentLoaded",(()=>r(document))),document.addEventListener("wp-block-render",(e=>r(e.target||document)))}();