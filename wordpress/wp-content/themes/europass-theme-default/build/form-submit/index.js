(()=>{var e,t={562:(e,t,o)=>{"use strict";const s=window.wp.blocks,r=window.wp.blockEditor,a=window.wp.components,n=window.wp.i18n,c=JSON.parse('{"UU":"parts-blocks/form-submit"}');o(944);const i=window.ReactJSXRuntime;(0,s.registerBlockType)(c.UU,{edit({attributes:e,setAttributes:t}){const{submitText:o,scopeClass:s,action:c,method:l,successMessage:d,errorMessage:u}=e,m=(0,r.useBlockProps)({className:"form-component is-submit"});return(0,i.jsxs)("div",{...m,children:[(0,i.jsx)(r.InspectorControls,{children:(0,i.jsxs)(a.PanelBody,{title:(0,n.__)("Налаштування","parts-blocks"),initialOpen:!0,children:[(0,i.jsx)(a.TextControl,{label:"Текст кнопки",value:o,onChange:e=>t({submitText:e})}),(0,i.jsx)(a.TextControl,{label:"scopeClass",help:"CSS-клас контейнера (наприклад .form-scope), з якого збиратимуться всі поля",value:s,onChange:e=>t({scopeClass:e})}),(0,i.jsx)(a.TextControl,{label:"action (URL)",value:c,onChange:e=>t({action:e})}),(0,i.jsx)(a.SelectControl,{label:"method",value:l,options:[{label:"POST",value:"POST"},{label:"GET",value:"GET"}],onChange:e=>t({method:e})}),(0,i.jsx)(a.TextControl,{label:"Повідомлення успіху",value:d,onChange:e=>t({successMessage:e})}),(0,i.jsx)(a.TextControl,{label:"Повідомлення помилки",value:u,onChange:e=>t({errorMessage:e})})]})}),(0,i.jsx)("div",{className:"fc-actions",children:(0,i.jsx)("button",{type:"button",className:"fc-submit","data-form-submit":"1","data-scope-class":s||".form-scope","data-action":c||"/","data-method":l||"POST","data-success-message":d||"OK","data-error-message":u||"Error",children:o||"Надіслати"})})]})},save({attributes:e}){const{submitText:t,scopeClass:o,action:s,method:a,successMessage:n,errorMessage:c}=e,l=r.useBlockProps.save({className:"form-component is-submit"});return(0,i.jsx)("div",{...l,children:(0,i.jsx)("button",{type:"button",className:"fc-submit","data-form-submit":"1","data-scope-class":o||".form-scope","data-action":s||"/","data-method":a||"POST","data-success-message":n||"Форму надіслано успішно.","data-error-message":c||"Сталася помилка.",children:t||"Надіслати"})})}})},944:()=>{!function(){function e(e){if(!e)return!1;const t=String(e).trim().match(/^([^@]+)@([^@]+)$/);return!!t&&(!!/^[A-Z0-9!#$%&'*+/=?^_`{|}~.-]+$/i.test(t[1])&&!!/^[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t[2]))}function t(t){const o=Array.from(t.querySelectorAll('[data-form-input="1"][name]')).filter((e=>!e.disabled));if(!o.length)return!1;const s=o.some((e=>!0===e.required)),r=e=>!s||!0===e.required,a=new Map;for(const e of o)if(("checkbox"===e.type||"radio"===e.type)&&r(e)){const t=a.get(e.name)||{required:!1,anyChecked:!1,hasInputs:!1};t.required=!0,t.anyChecked=t.anyChecked||e.checked,t.hasInputs=!0,a.set(e.name,t)}for(const t of o){var n;if(!r(t))continue;if("checkbox"===t.type||"radio"===t.type)continue;const o=t.tagName.toLowerCase();if("email"===t.type||"1"===t.getAttribute("data-validate-email")){var c;const o=(null!==(c=t.value)&&void 0!==c?c:"").toString().trim();if(""===o||!e(o))return!1}else{var i;if("file"!==t.type){if("select"!==o){if(""===(null!==(n=t.value)&&void 0!==n?n:"").toString().trim())return!1}else if(""===(null!==(i=t.value)&&void 0!==i?i:"").trim())return!1}else if(!(t.files&&t.files.length>0))return!1}}for(const[,e]of a)if(e.required&&e.hasInputs&&!e.anyChecked)return!1;const l=t.querySelector('.cc-input[type="checkbox"][required]');return!(l&&!l.checked)}function o(e,o){const s=t(o);e.classList.toggle("active",s),e.disabled=!s}function s(e=document){e.querySelectorAll('[data-form-submit="1"]').forEach((e=>{if(e.__fcBound)return;e.__fcBound=!0;const s=e.getAttribute("data-scope-class")||".form-scope",r=e.getAttribute("data-action")||"/",a=(e.getAttribute("data-method")||"POST").toUpperCase(),n=e.getAttribute("data-success-message")||"OK",c=e.getAttribute("data-error-message")||"Error",i=document.querySelector(s);i?function(e,t){if(!t||e.__fcValBound)return;e.__fcValBound=!0;const s=()=>o(e,t);s(),t.addEventListener("input",s),t.addEventListener("change",s)}(e,i):(console.warn("[form-components] scope element not found:",s),e.disabled=!0),e.addEventListener("click",(i=>{i.preventDefault();const l=document.querySelector(s);return l?t(l)?void async function({action:e,method:t,scopeEl:s,button:r,successMessage:a,errorMessage:n}){const c=r.textContent;r.disabled=!0,r.classList.add("is-loading");try{const n=function(e){const t=e.querySelectorAll('[data-form-input="1"][name]'),o=new FormData;return t.forEach((e=>{var t;e.disabled||("checkbox"===e.type||"radio"===e.type?e.checked&&o.append(e.name,e.value||"on"):o.append(e.name,null!==(t=e.value)&&void 0!==t?t:""))})),o}(s),i={method:t||"POST"};if("GET"===(t||"POST").toUpperCase()){const t=new URLSearchParams;for(const[e,o]of n.entries())t.append(e,o);const o=e.includes("?")?`${e}&${t}`:`${e}?${t}`;if(!(await fetch(o,{method:"GET",credentials:"same-origin"})).ok)throw new Error("Network error")}else if(i.body=n,i.credentials="same-origin",!(await fetch(e,i)).ok)throw new Error("Network error");r.classList.remove("is-loading"),r.classList.add("is-success"),a&&alert(a),r.textContent=c,s.querySelectorAll('[data-form-input="1"][name]').forEach((e=>{"checkbox"===e.type||"radio"===e.type?e.checked=!1:(e.type,e.value="")})),o(r,s)}catch(e){r.classList.remove("is-loading"),r.classList.add("is-error"),n&&alert(n),console.error("[form-components] submit failed:",e),r.textContent=c}finally{setTimeout((()=>{r.classList.remove("is-success","is-error"),o(r,s)}),1200)}}({action:r,method:a,scopeEl:l,button:e,successMessage:n,errorMessage:c}):(alert("Перевірте правильність заповнення полів."),void o(e,l)):(console.warn("[form-components] scope element not found:",s),void alert("Не знайдено контейнер форми: "+s))}))}))}document.addEventListener("DOMContentLoaded",(()=>s(document))),document.addEventListener("wp-block-render",(e=>s(e.target||document)))}()}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,o,r,a)=>{if(!o){var n=1/0;for(d=0;d<e.length;d++){for(var[o,r,a]=e[d],c=!0,i=0;i<o.length;i++)(!1&a||n>=a)&&Object.keys(s.O).every((e=>s.O[e](o[i])))?o.splice(i--,1):(c=!1,a<n&&(n=a));if(c){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,r,a]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={675:0,909:0,923:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var r,a,[n,c,i]=o,l=0;if(n.some((t=>0!==e[t]))){for(r in c)s.o(c,r)&&(s.m[r]=c[r]);if(i)var d=i(s)}for(t&&t(o);l<n.length;l++)a=n[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},o=globalThis.webpackChunkhero_circle_overlayed=globalThis.webpackChunkhero_circle_overlayed||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=s.O(void 0,[923],(()=>s(562)));r=s.O(r)})();