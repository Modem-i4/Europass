(()=>{"use strict";var e,t={643:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,r=window.wp.data,n=window.wp.components,o=window.wp.element,l=JSON.parse('{"UU":"parts-blocks/add-block-btn"}'),a=window.ReactJSXRuntime;function c(t,r){return t.flatMap((t=>{if("core/block"===t?.name&&t?.attributes?.ref){const n=r(t.attributes.ref);return n?c((0,e.parse)(n),r):[t]}if(t?.innerBlocks?.length){const e=c(t.innerBlocks,r);return[{...t,innerBlocks:e}]}return[t]}))}(0,e.registerBlockType)(l.UU,{edit:({attributes:l,setAttributes:s,clientId:i})=>{const{addMode:p,blockName:d,patternKey:u,buttonLabel:b,targetSelector:k}=l,h=(0,t.useBlockProps)(),{insertBlocks:g}=(0,r.useDispatch)("core/block-editor"),v=(0,r.useSelect)((e=>e("core/block-editor")),[]),w=(0,r.useSelect)((e=>e("core")),[]),f=v.getBlockRootClientId(i),x=v.getBlockIndex(i,f),m=(0,o.useMemo)((()=>u&&"pattern"===p&&(v.getBlockPatterns?.()||[]).find((e=>e.name===u))||null),[p,u,v]),y=(0,o.useMemo)((()=>/^\d+$/.test((u||"").trim())),[u]),C=(0,r.useSelect)((e=>{if(!y||"pattern"!==p)return null;const t=e("core"),r=Number(u);return t.getEntityRecord?.("postType","wp_pattern",r)||t.getEntityRecord?.("postType","wp_block",r)||null}),[p,y,u]),j=e=>{const t=w.getEntityRecord?.("postType","wp_block",e)||w.getEntityRecord?.("postType","wp_pattern",e)||null;return t?.content?.raw||null},B="pattern"===p&&u&&!m&&(!y||y&&!C);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.InspectorControls,{children:(0,a.jsxs)(n.PanelBody,{title:"Налаштування додавання",children:[(0,a.jsx)(n.SelectControl,{label:"Режим додавання",value:p,options:[{label:"Блок за ім’ям",value:"block"},{label:"Патерн (slug або ID)",value:"pattern"}],onChange:e=>s({addMode:e})}),"block"===p&&(0,a.jsx)(n.TextControl,{label:"Назва блоку (namespace/block)",value:d,onChange:e=>s({blockName:e}),placeholder:"core/paragraph"}),"pattern"===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.TextControl,{label:"Pattern (slug або ID)",value:u,onChange:e=>s({patternKey:e}),placeholder:"theme/pattern-name або 123"}),B&&(0,a.jsx)(n.Notice,{status:"warning",isDismissible:!1,children:"Патерн не знайдено ні за slug, ні за ID."})]}),(0,a.jsx)(n.TextControl,{label:"CSS-селектор таргета (опційно)",value:k,onChange:e=>s({targetSelector:e}),placeholder:".my-section або #target"}),(0,a.jsx)(n.TextControl,{label:"Текст кнопки",value:b,onChange:e=>s({buttonLabel:e})})]})}),(0,a.jsx)("div",{...h,className:"add-block-btn",children:(0,a.jsx)(n.Button,{variant:"primary",onClick:()=>{let t=[];if("block"===p)t=[(0,e.createBlock)(d)];else if("pattern"===p)if(m?.content)t=c((0,e.parse)(m.content),j);else{if(!y||!C?.content?.raw)return;t=c((0,e.parse)(C.content.raw),j)}if(!t.length)return;const{parentId:r,index:n}=(()=>{if(!k)return{parentId:f,index:x+1};const e=document.querySelector(k);if(!e)return{parentId:f,index:x+1};const t=e.closest(".block-editor-block-list__block"),r=t?.dataset?.block;return r?{parentId:r,index:(v.getBlockOrder(r)||[]).length}:{parentId:f,index:x+1}})();g(t,n,r)},children:b})})]})},save:()=>null})}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,r,o,l)=>{if(!r){var a=1/0;for(p=0;p<e.length;p++){for(var[r,o,l]=e[p],c=!0,s=0;s<r.length;s++)(!1&l||a>=l)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(c=!1,l<a&&(a=l));if(c){e.splice(p--,1);var i=o();void 0!==i&&(t=i)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[r,o,l]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={34:0,550:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,l,[a,c,s]=r,i=0;if(a.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(s)var p=s(n)}for(t&&t(r);i<a.length;i++)l=a[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(p)},r=globalThis.webpackChunkhero_circle_overlayed=globalThis.webpackChunkhero_circle_overlayed||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[550],(()=>n(643)));o=n.O(o)})();