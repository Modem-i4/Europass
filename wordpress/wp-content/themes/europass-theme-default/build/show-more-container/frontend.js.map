{"version":3,"file":"show-more-container/frontend.js","mappings":"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","sources":["webpack://hero-circle-overlayed/./src/show-more-container/frontend.js"],"sourcesContent":["(function () {\r\n  function init(root) {\r\n    const content = root.querySelector('.va-show-more__content')\r\n    const btn = root.querySelector('.va-show-more__btn')\r\n    const fade = root.querySelector('.va-show-more__fade')\r\n    if (!content || !btn) return\r\n\r\n    const moreText = root.dataset.label || btn.textContent || 'Переглянути всі'\r\n    const lessText = 'Показати менше'\r\n    const mobileOnly = (root.dataset.mobileOnly || '').toString() === '1' || (root.dataset.mobileOnly || '').toString() === 'true'\r\n\r\n    const vhSpc = Number.parseFloat(root.dataset.vhSpc) || 1\r\n    const vhSmobile = Number.parseFloat(root.dataset.vhSmobile) || 1\r\n\r\n    const isMobile = () => window.matchMedia('(max-width: 960px)').matches\r\n    const collapsedHeight = () => {\r\n      const vh = isMobile() ? vhSmobile : vhSpc\r\n      return Math.max(0, Math.round(vh * window.innerHeight))\r\n    }\r\n\r\n    const layout = () => {\r\n      // Якщо блок лише для мобільних і зараз ПК — розгортаємо повністю і ховаємо керування\r\n      if (mobileOnly && !isMobile()) {\r\n        const h = content.scrollHeight\r\n        root.classList.remove('is-expanded')\r\n        root.classList.remove('needs-toggle')\r\n        root.style.setProperty('--va-expanded', h + 'px')\r\n        root.style.setProperty('--va-collapsed', h + 'px')\r\n        root.style.setProperty('--va-cut-collapsed', '0px')\r\n        btn.setAttribute('aria-expanded', 'false')\r\n        btn.textContent = moreText\r\n        if (fade) fade.style.opacity = '0'\r\n        return\r\n      }\r\n\r\n      const th = collapsedHeight()           // пікселі, скільки екранів треба тримати у згорнутому стані\r\n      const h = content.scrollHeight\r\n      const need = h > th + 1                // потрібно перемикання?\r\n      const cut = need ? Math.max(0, h - th) : 0\r\n\r\n      root.classList.toggle('needs-toggle', need)\r\n      if (!need) root.classList.remove('is-expanded')\r\n\r\n      root.style.setProperty('--va-expanded', h + 'px')\r\n      root.style.setProperty('--va-collapsed', (need ? th : h) + 'px')\r\n      root.style.setProperty('--va-cut-collapsed', cut + 'px')\r\n\r\n      const expanded = root.classList.contains('is-expanded')\r\n      btn.textContent = expanded ? lessText : moreText\r\n      btn.setAttribute('aria-expanded', expanded ? 'true' : 'false')\r\n      if (fade) fade.style.opacity = expanded ? '0' : '1'\r\n    }\r\n\r\n    btn.addEventListener('click', () => {\r\n      root.classList.toggle('is-expanded')\r\n      layout()\r\n    })\r\n\r\n    layout()\r\n\r\n    let rId\r\n    const schedule = () => { cancelAnimationFrame(rId); rId = requestAnimationFrame(layout) }\r\n\r\n    window.addEventListener('resize', schedule)\r\n    window.addEventListener('orientationchange', schedule)\r\n    root.querySelectorAll('img').forEach(img => img.addEventListener('load', schedule, { once: true }))\r\n\r\n    const ro = new ResizeObserver(schedule)\r\n    ro.observe(content)\r\n    ro.observe(root)\r\n\r\n    const mo = new MutationObserver(schedule)\r\n    mo.observe(content, { childList: true, subtree: true, characterData: true, attributes: true })\r\n\r\n    if (document.fonts && document.fonts.ready) document.fonts.ready.then(schedule).catch(() => {})\r\n    root.addEventListener('va:show-more:layout', schedule)\r\n  }\r\n\r\n  function ready(fn){ if (document.readyState !== 'loading') fn(); else document.addEventListener('DOMContentLoaded', fn) }\r\n  ready(() => { document.querySelectorAll('.va-show-more').forEach(init) })\r\n})()\r\n"],"names":["init","root","content","querySelector","btn","fade","moreText","dataset","label","textContent","lessText","mobileOnly","toString","vhSpc","Number","parseFloat","vhSmobile","isMobile","window","matchMedia","matches","collapsedHeight","vh","Math","max","round","innerHeight","layout","h","scrollHeight","classList","remove","style","setProperty","setAttribute","opacity","th","need","cut","toggle","expanded","contains","addEventListener","rId","schedule","cancelAnimationFrame","requestAnimationFrame","querySelectorAll","forEach","img","once","ro","ResizeObserver","observe","mo","MutationObserver","childList","subtree","characterData","attributes","document","fonts","ready","then","catch","fn","readyState"],"sourceRoot":""}