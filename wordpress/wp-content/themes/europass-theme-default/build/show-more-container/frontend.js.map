{"version":3,"file":"show-more-container/frontend.js","mappings":"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","sources":["webpack://hero-circle-overlayed/./src/show-more-container/frontend.js"],"sourcesContent":["(function () {\r\n  function init(root) {\r\n    const content = root.querySelector('.va-show-more__content');\r\n    const btn = root.querySelector('.va-show-more__btn');\r\n    const fade = root.querySelector('.va-show-more__fade');\r\n    if (!content || !btn) return;\r\n\r\n    const moreText = root.dataset.label || btn.textContent || 'Переглянути всі';\r\n    const lessText = 'Показати менше';\r\n    const mobileOnly = (root.dataset.mobileOnly || '').toString() === '1' || (root.dataset.mobileOnly || '').toString() === 'true';\r\n\r\n    const isMobile = () => window.matchMedia('(max-width: 960px)').matches;\r\n    const threshold = () => Math.max(0, window.innerHeight - 380);\r\n\r\n    const layout = () => {\r\n      if (mobileOnly && !isMobile()) {\r\n        const h = content.scrollHeight;\r\n        root.classList.remove('is-expanded');\r\n        root.classList.remove('needs-toggle');\r\n        root.style.setProperty('--va-expanded', h + 'px');\r\n        root.style.setProperty('--va-collapsed', h + 'px');\r\n        root.style.setProperty('--va-cut-collapsed', '0px');\r\n        btn.setAttribute('aria-expanded', 'false');\r\n        btn.textContent = moreText;\r\n        if (fade) fade.style.opacity = '0';\r\n        return;\r\n      }\r\n\r\n      const th = threshold();\r\n      const h = content.scrollHeight;\r\n      const need = h > th + 1;\r\n      const cut = need ? Math.max(0, h - th) : 0;\r\n\r\n      root.classList.toggle('needs-toggle', need);\r\n      if (!need) root.classList.remove('is-expanded');\r\n\r\n      root.style.setProperty('--va-expanded', h + 'px');\r\n      root.style.setProperty('--va-collapsed', (need ? th : h) + 'px');\r\n      root.style.setProperty('--va-cut-collapsed', cut + 'px');\r\n\r\n      const expanded = root.classList.contains('is-expanded');\r\n      btn.textContent = expanded ? lessText : moreText;\r\n      btn.setAttribute('aria-expanded', expanded ? 'true' : 'false');\r\n      if (fade) fade.style.opacity = expanded ? '0' : '1';\r\n    };\r\n\r\n    btn.addEventListener('click', () => {\r\n      root.classList.toggle('is-expanded');\r\n      layout();\r\n    });\r\n\r\n    layout();\r\n\r\n    let rId;\r\n    const schedule = () => { cancelAnimationFrame(rId); rId = requestAnimationFrame(layout); };\r\n\r\n    window.addEventListener('resize', schedule);\r\n    window.addEventListener('orientationchange', schedule);\r\n    root.querySelectorAll('img').forEach(img => img.addEventListener('load', schedule, { once: true }));\r\n\r\n    const ro = new ResizeObserver(schedule);\r\n    ro.observe(content);\r\n    ro.observe(root);\r\n\r\n    const mo = new MutationObserver(schedule);\r\n    mo.observe(content, { childList: true, subtree: true, characterData: true, attributes: true });\r\n\r\n    if (document.fonts && document.fonts.ready) document.fonts.ready.then(schedule).catch(() => {});\r\n    root.addEventListener('va:show-more:layout', schedule);\r\n  }\r\n\r\n  function ready(fn){ if (document.readyState !== 'loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }\r\n  ready(() => { document.querySelectorAll('.va-show-more').forEach(init); });\r\n})();\r\n"],"names":["init","root","content","querySelector","btn","fade","moreText","dataset","label","textContent","lessText","mobileOnly","toString","isMobile","window","matchMedia","matches","threshold","Math","max","innerHeight","layout","h","scrollHeight","classList","remove","style","setProperty","setAttribute","opacity","th","need","cut","toggle","expanded","contains","addEventListener","rId","schedule","cancelAnimationFrame","requestAnimationFrame","querySelectorAll","forEach","img","once","ro","ResizeObserver","observe","mo","MutationObserver","childList","subtree","characterData","attributes","document","fonts","ready","then","catch","fn","readyState"],"sourceRoot":""}