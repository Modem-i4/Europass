(()=>{"use strict";var e,r={90:()=>{const e=window.wp.blocks,r=window.wp.blockEditor,t=window.wp.components,a=window.wp.data,l=JSON.parse('{"apiVersion":2,"name":"parts-blocks/news-card","title":"Картка новин","category":"parts-blocks","icon":"media-document","description":"Картка, що бере дані з поточного запису Query Loop.","supports":{"html":false},"usesContext":["postId","postType"],"attributes":{"fallbackImage":{"type":"string","default":""},"excerptLength":{"type":"number","default":200}},"editorScript":"file:./index.js","style":"file:./style-index.css","render":"file:./render.php"}'),s=window.ReactJSXRuntime;(0,e.registerBlockType)(l.name,{...l,edit:function({attributes:e,setAttributes:l,context:n}){const{fallbackImage:i="",excerptLength:c=200}=e,{postId:o,postType:d}=n||{},p=(0,r.useBlockProps)({className:"news-latest-card"}),{post:u,media:m,cats:h}=(0,a.useSelect)((e=>{if(!o||!d)return{post:null,media:null,cats:[]};const r=e("core"),t=r.getEntityRecord("postType",d,o);return{post:t,media:t?.featured_media?r.getMedia(t.featured_media):null,cats:(t?.categories?.length?r.getEntityRecords("taxonomy","category",{include:t.categories}):[])||[]}}),[o,d]),g=u?.title?.rendered?u.title.rendered.replace(/<[^>]*>/g,""):"",x=u?.link||"#",f=m?.source_url||i||"",v=(e=>{if(!e)return"";const r=(Date.now()-new Date(e).getTime())/1e3,t=Math.floor(r/3600);return t<1?`${Math.max(1,Math.floor(r/60))} хв тому`:t<24?`${t} год тому`:`${Math.floor(t/24)} дн тому`})(u?.date_gmt||u?.date),b=((e,r=200)=>{const t=e.split(/\s+/);return t.length<=r?e:t.slice(0,r).join(" ")+" […]"})(u?.excerpt?.rendered?((e="")=>e.replace(/<[^>]*>/g,"").trim())(u.excerpt.rendered):"",c);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.InspectorControls,{children:(0,s.jsxs)(t.PanelBody,{title:"Налаштування картки",initialOpen:!0,children:[(0,s.jsx)(r.MediaUploadCheck,{children:(0,s.jsx)(r.MediaUpload,{onSelect:e=>l({fallbackImage:e?.url||""}),allowedTypes:["image"],render:({open:e})=>(0,s.jsx)(t.Button,{variant:"secondary",onClick:e,children:i?"Змінити fallback‑зображення":"Обрати fallback‑зображення"})})}),!!i&&(0,s.jsx)(t.Button,{variant:"link",onClick:()=>l({fallbackImage:""}),style:{marginTop:8},children:"Прибрати fallback"}),(0,s.jsx)(t.RangeControl,{label:"Довжина уривка (слова)",value:c,onChange:e=>l({excerptLength:e}),min:10,max:600,step:10})]})}),u?(0,s.jsx)("div",{...p,children:(0,s.jsxs)("a",{className:"card-wrapper",href:x,onClick:e=>e.preventDefault(),children:[(0,s.jsx)("div",{className:"card-image-wrapper",children:f?(0,s.jsx)("img",{src:f,alt:g||"",className:"card-image"}):(0,s.jsx)("div",{className:"card-image-placeholder"})}),(0,s.jsx)("div",{className:"card-gradient-bar"}),(0,s.jsxs)("div",{className:"card-content",children:[(0,s.jsx)("h3",{className:"card-title",children:g||"Без назви"}),(0,s.jsx)("div",{className:"card-excerpt",children:b}),(0,s.jsx)("div",{className:"card-meta",children:(0,s.jsx)("div",{className:"card-date",children:v})})]})]})}):null]})},save:()=>null})}},t={};function a(e){var l=t[e];if(void 0!==l)return l.exports;var s=t[e]={exports:{}};return r[e](s,s.exports,a),s.exports}a.m=r,e=[],a.O=(r,t,l,s)=>{if(!t){var n=1/0;for(d=0;d<e.length;d++){for(var[t,l,s]=e[d],i=!0,c=0;c<t.length;c++)(!1&s||n>=s)&&Object.keys(a.O).every((e=>a.O[e](t[c])))?t.splice(c--,1):(i=!1,s<n&&(n=s));if(i){e.splice(d--,1);var o=l();void 0!==o&&(r=o)}}return r}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[t,l,s]},a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={448:0,544:0};a.O.j=r=>0===e[r];var r=(r,t)=>{var l,s,[n,i,c]=t,o=0;if(n.some((r=>0!==e[r]))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(c)var d=c(a)}for(r&&r(t);o<n.length;o++)s=n[o],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},t=globalThis.webpackChunkhero_circle_overlayed=globalThis.webpackChunkhero_circle_overlayed||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var l=a.O(void 0,[544],(()=>a(90)));l=a.O(l)})();